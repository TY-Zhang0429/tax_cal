<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>æç°ç¨é‡‘è®¡ç®—å™¨</title>
<style>
  body { font-family: Arial; padding: 20px; background: #f8f8f8; }
  .box { background: #fff; padding: 20px; border-radius: 10px; }
  input { width: 100%; padding: 10px; margin-top: 10px; }
  button { width: 100%; padding: 12px; margin-top:10px; font-size:16px; border-radius:8px; background:#07c160; color:#fff; border:none; cursor:pointer; }
  button.blue { background:#10AEFF; }
  .result { background:#eee; padding:15px; margin-top:20px; border-radius:8px; }
</style>
</head>
<body>

<div class="box">
  <h2>æç°ç¨é‡‘è®¡ç®—å™¨</h2>

  <label>å¹´åº¦æç°é‡‘é¢ï¼ˆå…ƒï¼‰</label>
  <input type="number" id="amount" placeholder="ä¾‹å¦‚ 200000">

  <button onclick="calcTax()">è®¡ç®—ç¨é‡‘</button>
  <button class="blue" onclick="suggest()">è‡ªåŠ¨å»ºè®®æç°é‡‘é¢</button>

  <div id="output" class="result" style="display:none;"></div>
</div>

<script>
function calcTax(){
  let amount = Number(document.getElementById("amount").value);
  let taxable = amount * 0.8 - 60000;
  if (taxable < 0) taxable = 0;

  const brackets = [
    { up:36000, rate:0.03, quick:0 },
    { up:144000, rate:0.10, quick:2520 },
    { up:300000, rate:0.20, quick:16920 },
    { up:420000, rate:0.25, quick:31920 },
    { up:660000, rate:0.30, quick:52920 },
    { up:960000, rate:0.35, quick:85920 },
    { up:Infinity, rate:0.45, quick:181920 }
  ];

  let rate=0, quick=0;
  for(let b of brackets){
    if(taxable <= b.up){ rate=b.rate; quick=b.quick; break; }
  }

  let tax = Math.max(taxable * rate - quick, 0);
  let ratePct = (tax/amount*100).toFixed(2);

  document.getElementById("output").style.display="block";
  document.getElementById("output").innerHTML = `
    <b>åº”çº³ç¨æ‰€å¾—é¢ï¼š</b>Â¥${taxable.toFixed(2)}<br>
    <b>å¹´åº¦ä¸ªç¨ï¼š</b>Â¥${tax.toFixed(2)}<br>
    <b>å®é™…ç¨ç‡ï¼š</b>${ratePct}%<br>
  `;
}

function suggest(){
  let amount = Number(document.getElementById("amount").value);
  const max = 100000;
  let months = Math.ceil(amount / max);

  let output = "";
  if(months > 12){
    output = `
      â—é‡‘é¢å¤ªå¤§å½“å¹´æ— æ³•å…¨éƒ¨é¿å¼€å¢å€¼ç¨<br><br>
      âœ… æ–¹æ¡ˆA: è·¨å¹´æç°<br>
      âœ… æ–¹æ¡ˆB: åˆ†å¤šä¸»ä½“æç°ï¼ˆåˆè§„å‰æä¸‹ï¼‰<br>
    `;
  } else {
    let avg = (amount / 12).toFixed(2);
    output = `
      âœ… å»ºè®®å…¨å¹´å¹³å‡æç°<br>
      æ¯æœˆæç°ï¼š<b>Â¥${avg}</b><br>
      ğŸ“Œ æœˆæœˆ â‰¤ Â¥100,000 â†’ ä¸è§¦å‘å¢å€¼ç¨<br>
    `;
  }

  document.getElementById("output").style.display="block";
  document.getElementById("output").innerHTML = output;
}
</script>

</body>
</html>
